{"version":3,"file":"vue.js","sources":["../lib/utils.js","../lib/observe/array.js","../lib/observe/dep.js","../lib/observe/index.js","../lib/observe/scheduler.js","../lib/observe/watcher.js","../lib/state.js","../lib/vDom/patch.js","../lib/lifecycle.js","../lib/compile/parser.js","../lib/compile/generate.js","../lib/compile/index.js","../lib/init.js","../lib/vDom/index.js","../lib/render.js","../lib/global-api/index.js","../lib/index.js"],"sourcesContent":["export const isFunction = val => {\n  return typeof val === 'function'\n}\nexport const isObject = val => {\n  return typeof val === 'object' && val !== null\n}\nexport const isArray = val => {\n  return Array.isArray(val)\n}\n\nexport let compileTemplate = {\n  // 匹配标签名\n  tag: `[a-zA-Z][0-9a-zA-Z]*`,\n  // 匹配标签开始\n  startTag: html => {\n    const reg = new RegExp(`^<(${compileTemplate.tag})`)\n    return html.match(reg)\n  },\n  // 匹配标签属性\n  tagAttributes: text => {\n    // 标签属性有3种,a=b a='b' a=\"b\",前后可能有多个空格\n    const reg = /\\s*([^=\\s'\"\\/<>]+)\\s*=\\s*(?:\"([^\"]+)\")|(?:'([^']+)')|([^\\s\"'=<>`]+)?/\n    return text.match(reg)\n  },\n  // 匹配标签结束\n  tagClose: text => {\n    // 可能为自结束标签，可以为> ,/>\n    const reg = /^\\s*(\\/?)>/\n    return text.match(reg)\n  },\n  // 匹配结束标签\n  closeTag: text => {\n    // </div >\n    const reg = new RegExp(`^<\\/(${compileTemplate.tag})*>`)\n    return text.match(reg)\n  },\n  // 匹配插值语法\n  qn: (text, count = 1) => {\n    const reg = /\\{\\{([\\s\\S]*?)\\}\\}/g\n    return count ? text.match(reg) : reg\n  }\n}\n\n\nlet callbacks = []\nlet watting = false\nexport function nextTick (cb) {\n  // 按照正常来说，肯定是内部源码调用的nextTick先进来，然后再是函数，因为代码是一行行执行的\n  callbacks.push(cb)\n  // 也要做防抖，不能每次调用nextTick都循环一次\n  if (!watting) {\n    watting = true\n    Promise.resolve().then(flushCallbacks)\n  }\n}\nfunction flushCallbacks () {\n  for (let i = 0; i < callbacks.length; i++) {\n    const cb = callbacks[i]\n    cb()\n  }\n  callbacks = []\n  watting = false\n}\n\nconst hooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\nconst stracts = {}\nfor (let i = 0; i < hooks.length; i++) {\n  const hook = hooks[i]\n  stracts[hook] = mergeHook\n}\n\nfunction mergeHook (parentValue, childValue) {\n  if (parentValue) {\n    // 有值说明是类似这样{hook:[fn]},我们直接合并就行\n    // parentValue就是 [fn]\n    return parentValue.concat(childValue)\n  } else {\n    // 第一个parentValue是空对象，那么我们需要编程{hook:[fn]}\n    return [childValue]\n  }\n}\n\nexport function mergeOptions (parent, child) {\n  let obj = {}\n  for (let key in parent) {\n    mergeField(key)\n  }\n  for (let key in child) {\n    mergeField(key)\n  }\n  function mergeField (key) {\n    /**\n     * \n     * 情况:\n     *  parent : {a:1} child : {a:2} ==> {a:2}\n     *  parent : {a:1,data:{c:1}} child : {b:2,data:{d:2}} ==> {a:1,data:{c:1,d:2},b:2}\n     *  parent : {}  child : {beforeCreated:fn} ==> {beforeCreated:[fn]}\n     *  parent : {beforeCreated:[fn]} child : {beforeCreated:fn} ==> {beforeCreated:[fn1,fn2]}\n     * **/\n    const parentValue = parent[key]\n    const childValue = child[key]\n    // 生命周期策略\n    if (stracts[key]) {\n      obj[key] = stracts[key](parentValue, childValue)\n    } else {\n      // 如果value是对象，暂时不考虑递归合并，浅拷贝\n      // 如果value不是对象，那么以child数据为准\n      if (isObject(parentValue) && isObject(childValue)) {\n        obj[key] = { ...parentValue, ...childValue }\n      } else {\n        // 如果子没值，就取父的值\n        obj[key] = childValue || parentValue\n      }\n    }\n  }\n  return obj\n}","const oldArrayProto = Array.prototype\nexport const arrayMethods = Object.create(oldArrayProto)\nlet methods = [\n  'shift',\n  'unshift',\n  'sort',\n  'pop',\n  'splice',\n  'push',\n  'reverse'\n]\n\nmethods.forEach(method => {\n  // 对数组方法进行重写\n  arrayMethods[method] = function (...args) {\n    oldArrayProto[method].call(this, ...args)\n    let ob = this.__ob__ // 拿到Observe实例\n\n    // 如果方法是新增属性的，那么我们要对新增的属性再次进行响应式处理\n    let inserted\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n\n    if (inserted) {\n      // 说明调用了push/unshift/splice等方法\n      // 将新增的数据定义成响应式\n      ob.observeArray(inserted)\n    }\n    // 调用了数组的变异方法，就要通知watcher进行更新\n    ob.dep.notify()\n  }\n})\n","let id = 0\nclass Dep {\n  constructor() {\n    this.id = id++\n    this.subs = []\n  }\n  depend () {\n    if (Dep.target) {\n      // Dep.target就是watcher\n      Dep.target.addDeps(this) // this是当前实例dep\n    }\n  }\n  addSubs (watcher) {\n    this.subs.push(watcher)\n  }\n  notify () {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\n\nDep.target = null\nlet stack = []\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\nexport function popTarget () {\n  // Dep.target = null\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\nexport default Dep\n","import { isArray, isObject } from \"../utils\"\nimport { arrayMethods } from './array'\nimport Dep from \"./dep\"\nclass Observe {\n  constructor(data) {\n    // 只要类型是对象的都分配dep属性\n    this.dep = new Dep()\n    // 响应式属性里都会有一个__ob__属性\n    // data.__ob__ = this // 这么写会导致爆栈，因为一直在调用walk方法，然后一直在循环调用new Observe\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false // 不可被枚举(遍历)\n    })\n    // 如果数据为一个数组，那么也会进来，此时我们要改写数组中的方法\n    if (isArray(data)) {\n      // 改写数组的方法\n      data.__proto__ = arrayMethods\n      this.observeArray(data) // 对数组中是对象的定义成响应式\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray (data) {\n    data.forEach(item => {\n      observe(item)\n    })\n  }\n  walk (data) {\n    Object.keys(data).forEach(key => {\n      const value = data[key]\n      defineReactive(data, key, value)\n    })\n  }\n}\n\nfunction dependArray (value) {\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i] // current就是嵌套的数组\n    current.__ob__ && current.__ob__.dep.depend()\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\nfunction defineReactive (data, key, value) {\n  // 如果对象嵌套对象，继续进行递归观测\n  let childOb = observe(value)\n  // 每个属性都有自己的dep\n  let dep = new Dep()\n  Object.defineProperty(data, key, {\n    get () {\n      // 先执行的是pushTarget方法存放了watcher，然后挂载组件，模板中使用了vm上的属性，会触发get，进来\n      if (Dep.target) {\n        dep.depend() // 存放watcher\n        // console.log(value)\n        // console.log(childOb)\n        if (childOb) {\n          // 说明数组或者对象(引用类型)中也需要收集watcher\n          childOb.dep.depend()\n          // 数组嵌套数组,也要考虑，因为数组嵌套数组，也会生成一个新的dep，新的dep也要去收集Watcher\n          if (Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set (newVal) {\n      if (value !== newVal) {\n        // 如果用户新赋值一个对象，那么新对象也要进行观测\n        observe(newVal)\n        value = newVal\n        // 通知watcher去更新\n        dep.notify()\n      }\n    }\n  })\n}\n\nexport function observe (data) {\n  if (!isObject(data)) return\n  if (data.__ob__) return data.__ob__\n  return new Observe(data)\n}","import { nextTick } from '../utils'\nlet queue = []\nlet obj = {}\nlet pending = false\nexport function queueWatcher (watcher) {\n  const id = watcher.id\n  if (!obj[id]) {\n    queue.push(watcher)\n    obj[id] = true\n    if (!pending) {\n      pending = true\n      nextTick(flushSchedulerQueue)\n    }\n  }\n}\n\nfunction flushSchedulerQueue () {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run()\n  }\n  queue = []\n  obj = {}\n  pending = false\n}","import { pushTarget, popTarget } from \"./dep\"\nimport { queueWatcher } from './scheduler'\nlet id = 0\nclass Watcher {\n  /**\n   * \n   * @param {*} vm Vue实例\n   * @param {*} updateFnOrExpr 更新的方法或者表达式\n   * @param {*} cb 自定义回调函数\n   * @param {*} options 其他选项配置\n   */\n  constructor(vm, updateFnOrExpr, cb, options = {}) {\n    this.vm = vm\n    this.id = id++ // 每个watcher都是单独的，用id来区分一下\n    this.user = !!options.user // 区分是否为用户Watcher\n    this.lazy = !!options.lazy // 区分是否为计算Watcher，默认不执行\n    this.dirty = !!options.lazy // 区分是否需要调用计算属性中的get回调\n    this.cb = cb\n    this.options = options\n    this.deps = []\n    this.depsId = new Set()\n    if (typeof updateFnOrExpr === 'string') {\n      // 表示为一个表达式，因为等下要调用this.get，get方法中会调用updateFnOrExpr，所以我们这里重写updateFnOrExpr\n      // 等下调用this.get会存储用户Watcher,然后调用this.updateFnOrExpr会触发我们下面的函数，然后会触发响应式中的get方法\n      // 会去收集用户Watcher，然后返回vm.name的值\n      // 当我们去改变name值的时候，会通知Watcher更新，我们收集新值和老值然后去调用用户回调即可\n      this.updateFnOrExpr = function () {\n        // return vm[updateFnOrExpr]\n\n        // 外界可能传入这种格式,'hobby.a'(),我们需要取到a的值,就不能按照上面那种写法了\n        let obj = vm\n        const arr = updateFnOrExpr.split('.')\n        for (let i = 0; i < arr.length; i++) {\n          obj = obj[arr[i]]\n        }\n        return obj\n      }\n    } else {\n      // 表示为渲染Watcher\n      this.updateFnOrExpr = updateFnOrExpr\n    }\n\n    this.value = this.lazy ? undefined : this.get()\n  }\n  get () {\n    pushTarget(this)\n    // 这个方法会触发Object.defineProperty中的get，会去vm上面取值,第一次的值就是最早的值，第二次的值就是最新的值\n    const value = this.updateFnOrExpr()\n    popTarget() // 在外面用vm上的属性是不需要收集Watcher的\n    return value\n  }\n  // 存放dep,如果模板中使用了2次 {{ name }} {{ name }},他们其实用的是一个id，那么我们就不需要存放到数组中，需要进行去重\n  addDeps (dep) {\n    const id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      // 调用dep的addSubs方法来存放watcher\n      dep.addSubs(this)\n    }\n  }\n  // Vue中是异步更新的，主要是做一个缓存等待\n  // 如果watcher的id都是一样，那么要进行去重，而且只需要更新一次即可 (防抖) ，同一个页面多个dep公共一个watcher\n  // 所以Vue内部更新原理是: 去重 + 防抖\n  update () {\n    if (this.lazy) {\n      this.dirty = true\n    } else {\n      queueWatcher(this)\n    }\n  }\n  run () {\n    // 更新\n    const newVal = this.get()\n    if (this.user) {\n      const oldValue = this.value\n      // 下一次的老值是这一次的新值\n      this.value = newVal\n      // 表示是用户watcher\n      this.cb.call(this.vm, newVal, oldValue)\n    }\n  }\n  // 计算属性的缓存\n  computedFn () {\n    this.dirty = false\n    // get函数的返回值就是外面用户在get函数中return的值\n    this.value = this.get()\n  }\n  depend () {\n    // 因为我们在计算属性中取了值，所以会去收集dep\n    let i = this.deps.length\n    while (i--) {\n      const dep = this.deps[i]\n      dep.depend()\n    }\n  }\n}\n\nexport default Watcher","import { observe } from './observe/index'\nimport { isFunction } from './utils'\nimport Watcher from './observe/watcher'\nimport Dep from './observe/dep'\nexport function stateMixin (Vue) {\n  Vue.prototype.$watch = function (key, handler, options = {}) {\n    const vm = this\n    options.user = true // 表示是一个用户Watcher\n    new Watcher(vm, key, handler, options)\n  }\n}\nexport function initState (vm) {\n  if (vm.$options.data) {\n    initData(vm)\n  }\n  if (vm.$options.watch) {\n    initWatch(vm)\n  }\n  if (vm.$options.computed) {\n    initComputed(vm)\n  }\n}\nfunction proxy (vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[source][key]\n    },\n    set (newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}\nfunction initData (vm) {\n  let data = vm.$options.data\n  data = vm._data = isFunction(data) ? data.call(vm) : data\n  // 所有的数据现在都在_data中，那么我们做一层数据代理，外界访问vm.xxx的时候我们去vm._data中读取xxx\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}\nfunction initWatch (vm) {\n  const watch = vm.$options.watch\n  Object.keys(watch).forEach(key => {\n    const handler = watch[key]\n    // handler可能是数组，可能是字符串，可能是对象,可能是函数\n    // 暂时没实现methods和对象,所以先不考虑这两种\n    // 那就先考虑数组和函数的情况\n    if (Array.isArray(handler)) {\n      for (let i = 0; i < handler.length; i++) {\n        const fn = handler[i]\n        // 没一个函数都是一个watcher，只不过这个watcher是用户的\n        createWatcher(vm, key, fn)\n      }\n    } else {\n      createWatcher(vm, key, handler)\n    }\n  })\n}\nfunction initComputed (vm) {\n  const computed = vm.$options.computed\n  vm._computedWatchers = {}\n  Object.keys(computed).forEach(key => {\n    const value = computed[key]\n    // value有2种，一种是对象，一种是函数\n    let getter = typeof value === 'function' ? value : value.get\n    // 这个getter就是用户getter\n    // vm._computedWatchers用于做一个映射表，方便后面我们拿到Watcher\n    // getter函数内部的this是指向vm的\n    vm._computedWatchers[key] = new Watcher(vm, getter.bind(vm), () => { }, { lazy: true })\n    defineComputed(vm, key, value)\n  })\n}\n\nfunction createWatcher (vm, key, handler) {\n  vm.$watch(key, handler)\n}\n/**\n * \n * @param {*} key 计算属性对象中的每一个key，上面已经做了映射表\n */\nfunction createComputedGetter (key) {\n  // 返回后的get回调\n  return function () {\n    // 这里的this是vm调用的，因为我们定义了Object.defineProperty,第一个参数是vm\n    // 因为我们的getter函数也被存到了Watcher中，所以我们需要拿到Watcher然后在特定时机调用即可\n    const watcher = this._computedWatchers[key]\n    // 计算属性的缓存\n    if (watcher.dirty) {\n      // 说明是脏的，需要调用用户的回调\n      watcher.computedFn()\n    }\n    // 此时的计算Watcher已经覆盖了渲染Watcher,栈中存放了2个Watcher，一个计算，一个渲染\n    if (Dep.target) {\n      // 向上收集渲染Watcher\n      // 找到相关依赖dep\n      watcher.depend()\n    }\n    return watcher.value\n  }\n}\nfunction defineComputed (vm, key, value) {\n  let shareComputed = {}\n  if (typeof value === 'function') {\n    // 因为计算属性具有缓存功能，所以我们这里用高阶函数返回一个getter，getter是否能被调用取决于dirty属性\n    shareComputed.get = createComputedGetter(key)\n  } else {\n    shareComputed.get = createComputedGetter(key)\n    shareComputed.set = value.set\n  }\n  // 把key定义到vm上面，用于渲染模板\n  Object.defineProperty(vm, key, shareComputed)\n}\n","export function patch (oldVnode, vNode) {\n  // 新旧虚拟dom比较,暂时不做\n  const parent = oldVnode.parentNode\n  if (parent.nodeType === 1) {\n    // 真实元素\n    const elm = createEl(vNode)\n    parent.insertBefore(elm, oldVnode.nextSibling)\n    parent.removeChild(oldVnode)\n    return elm\n  }\n}\n\nfunction createEl (vNode) {\n  const { vm, text, key, children, tag, data } = vNode\n  let elm = ''\n  if (tag) {\n    // 标签\n    elm = document.createElement(tag)\n    if (children && children.length) {\n      for (let i = 0; i < children.length; i++) {\n        const item = children[i]\n        elm.appendChild(createEl(item))\n      }\n    }\n  } else {\n    // 文本\n    elm = document.createTextNode(text)\n  }\n  return elm\n}","import { patch } from './vDom/patch'\nimport { nextTick } from './utils'\nimport Watcher from './observe/watcher'\nexport function mountComponent (vm, el) {\n  // 挂载组件之前调用beforeMount钩子\n  callHooks(vm, 'beforeMount')\n  const updateComponent = () => {\n    // 生成虚拟dom\n    const vNode = vm._render()\n    // 更新\n    vm._update(vNode)\n  }\n  // updateComponent() ==> 更新组件\n  // 这里渲染的时候我们创建一个Watcher，在Watcher中更新组件\n  new Watcher(vm, updateComponent, () => {\n    console.log('update view')\n  }, true) // true代表是一个渲染Watcher\n  callHooks(vm, 'mounted')\n}\nexport function lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vNode) {\n    const vm = this\n    vm.$el = patch(vm.$el, vNode)\n  }\n  Vue.prototype.$nextTick = nextTick\n}\n\n// 调用指定的钩子函数\nexport function callHooks (vm, hook) {\n  // 拿到Vue.options上经过mixin合并的hook\n  // const handlers = vm.constructor.options[hook]\n  // 因为我们将Vue.options和vm.$options进行了合并，让mixin中的数据可以混入到组件中，所以我们直接调用组件的$options中的钩子就行(已经被合并过了)\n  const handlers = vm.$options[hook]\n  // console.log(handlers, hook)\n  if (handlers) {\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i]\n      // 钩子内部的this指向的是当前组件实例\n      handler.call(vm)\n    }\n  }\n}\n\n\n","import { compileTemplate } from '../utils'\n\n// 树根\nlet root = null\n// 栈\nconst stack = []\n// 创建ast语法树\nfunction createAstElement (tag, attrs) {\n  return {\n    tag,\n    parent: null,\n    children: [],\n    attrs,\n    type: 1,\n    text: ''\n  }\n}\nfunction start (tag, attributes) {\n  // console.log('标签开始', tag, attributes)\n  // 取出栈中最后一个\n  const parent = stack[stack.length - 1]\n  // 创建ast元素\n  const element = createAstElement(tag, attributes)\n  // 如果没有根元素，那么创建出来的ast元素就是根元素\n  if (!root) {\n    root = element\n  }\n  if (parent) {\n    // 有父级元素\n    parent.children.push(element)\n    element.parent = parent\n  }\n  stack.push(element)\n}\nfunction chars (text) {\n  // console.log('标签文本', text)\n  const parent = stack[stack.length - 1]\n  text = text.replace(/\\s/g, '')\n  if (text) {\n    parent.children.push({\n      type: 3,\n      text\n    })\n  }\n}\nfunction end (tag) {\n  // console.log('标签结束', tag)\n  const element = stack.pop()\n  if (element.tag !== tag) {\n    throw new Error('标签有误')\n  }\n}\nexport function parserHtml (html) {\n  /**\n   * 用正则匹配标签开始，标签名，然后提取标签名放入容器中，然后移除掉匹配的部分 \n   * 用正则匹配标签属性，然后提取属性放入容器中，然后移除掉匹配的部分\n   * 用正则匹配标签结束，然后移除掉匹配的部分\n   * 用正则匹配标签中的文本，然后提取文本放入容器中，然后移除掉匹配的部分\n   * 用正则匹配标签结束，然后提取标签结束名和标签开始的标签名进行匹配，如果相同，说明标签相同，不相同，抛错\n   */\n  function advance (len) {\n    html = html.substring(len)\n  }\n  // 解析开始标签\n  function parseStartTag () {\n    let startTag = compileTemplate.startTag(html)\n    if (startTag) {\n      advance(startTag[0].length)\n      let match = {\n        tag: startTag[1],\n        attrs: []\n      }\n      let text, end\n      // 匹配属性,只要没有到结束标签并且一直都可以匹配到属性，就一直循环\n      while (!(end = compileTemplate.tagClose(html)) && (text = compileTemplate.tagAttributes(html))) {\n        match.attrs.push({\n          key: text[1],\n          value: text[2] || text[3] || text[4]\n        })\n        advance(text[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n      }\n      return match\n    }\n    return false\n  }\n  // 解析结束标签\n  function parseEndTag () {\n    let endTag = compileTemplate.closeTag(html)\n    if (endTag) {\n      advance(endTag[0].length)\n      return endTag[1]\n    }\n    return false\n  }\n  while (html) {\n    let index = html.indexOf('<')\n    if (index === 0) {\n      // 不是标签开始位置就是标签结束位置\n      // 解析开始标签\n      let startMatch = parseStartTag()\n      if (startMatch) {\n        start(startMatch.tag, startMatch.attrs)\n        continue\n      }\n      let endMatch = parseEndTag()\n      if (endMatch) {\n        end(endMatch)\n        continue\n      }\n    }\n    // 拿到文本的所有内容\n    let text = html.slice(0, index)\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n  return root\n}","import { compileTemplate } from '../utils'\nfunction gen (c) {\n  if (c.type === 1) {\n    // 元素\n    return generate(c)\n  } else {\n    // 文本 _v('hello')\n    const text = c.text\n    const regRes = compileTemplate.qn(text)\n    // 如果没有匹配到插值语法 hello {{name}} world  ==> 'hello' + name + 'world'\n    if (!regRes) {\n      return `_v('${text}')`\n    } else {\n      const reg = compileTemplate.qn(text, 0)\n      let tokens = []\n      let lastIndex = 0\n      text.replace(reg, function (...args) {\n        if (text.slice(lastIndex, args[2])) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, args[2])))\n        }\n        if (lastIndex < text.length - 1) {\n          tokens.push(args[1].trim())\n        }\n        lastIndex = args[2] + (args[0].length)\n      })\n      if (lastIndex < text.length) {\n        if (text.slice(lastIndex)) {\n          tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n      }\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\nfunction genChildren (root) {\n  const children = root.children\n  if (children && children.length) {\n    const res = children.map(c => gen(c)).join('+')\n    return res\n  }\n  return false\n}\nfunction genProps (props) {\n  let str = ''\n  for (let i = 0; i < props.length; i++) {\n    let { key, value } = props[i]\n    if (key === 'style') {\n      let styleObj = {}\n      // \"color: red;background-color: #fff\"; 转成对象\n      value.replace(/([^:;]+):([^:;]+)/g, function (p, s1, s2) {\n        styleObj[s1] = s2\n      })\n      value = styleObj\n    }\n    str += `${key}:${JSON.stringify(value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\nexport function generate (root) {\n  // 将ast语法树拼接成字符串\n  /**\n   * _c('div',{id:'root',name:'zhengchangfu'},'hello')\n   * new Function + with语法\n   */\n  const children = genChildren(root)\n  let code = `_c('${root.tag}',${root.attrs.length ? genProps(root.attrs) : 'undefined'}${children ? `,${children}` : ''})`\n  //code ==>  _c('div',{id:\"root\",name:\"zhengchangfu\",style:{\"color\":\" red\",\"background-color\":\" #fff\"}},_c('p',undefined,_c('span',undefined,_v(\"我叫\"+name+\"哈哈\"))))\n  return code\n} ","import { parserHtml } from './parser'\nimport { generate } from './generate'\nexport function CompileToFunction (html) {\n  // 将html编译成ast语法树\n  let root = parserHtml(html)\n  // 将ast语法树转换成代码\n  let code = generate(root)\n  console.log(code, 'code')\n  // 将code代码串转成函数\n  let render = new Function(`with(this){return ${code}}`)\n  // console.log(render, 'render')\n  /**\n   * ƒ anonymous(){\n      with(this){\n        return _c(\n          'div',\n          {\n            id:\"root\",\n            name:\"zhengchangfu\",\n            style:{\n              \"color\":\" red\",\n              \"background-color\":\" #fff\"\n            }\n          },\n          _c(\n            'p',\n            undefined,\n            _c(\n              'span',\n              undefined,\n              _v(\n                \"我叫\"+name+\"哈哈\"\n                )\n              )\n            )\n          )\n       }\n    }\n   */\n  return render\n}\n","import { initState } from './state'\nimport { mountComponent } from './lifecycle'\nimport { CompileToFunction } from './compile/index'\nimport { callHooks } from './lifecycle'\nimport { mergeOptions } from './utils'\nexport function initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // vm.$options = options\n    // 将$options中的选项和Vue.options进行合并，这样的话，mixin中就可以混入数据到组件中\n    vm.$options = mergeOptions(vm.constructor.options, options)\n    // 初始化数据之前调用beforeCreate\n    callHooks(vm, 'beforeCreate')\n    initState(vm)\n    // 初始化数据之后调用created\n    callHooks(vm, 'created')\n    // 挂载\n    if (vm.$options.el) {\n      vm.$mount(vm)\n    }\n  }\n  Vue.prototype.$mount = function (vm) {\n    let el = vm.$options.el\n    if (!vm.$options.render) {\n      el = document.querySelector(el)\n      vm.$el = el\n      el = el.outerHTML\n      let render = CompileToFunction(el)\n      vm.$options.render = render\n    }\n    // 挂载组件\n    mountComponent(vm, el)\n  }\n}","\nexport function createElement (vm, tag, data = {}, ...children) {\n  return createVDom(vm, tag, data, data.key, children, undefined)\n}\nexport function createText (vm, text) {\n  return createVDom(vm, undefined, undefined, undefined, undefined, text)\n}\nfunction createVDom (vm, tag, data, key, children, text) {\n  return {\n    vm,\n    tag,\n    data,\n    key,\n    children,\n    text\n  }\n}","\nimport { createElement, createText } from './vDom/index'\nexport function renderMixin (Vue) {\n  // 创建元素\n  Vue.prototype._c = function (...args) {\n    return createElement(this, ...args)\n  }\n  // 创建文本\n  Vue.prototype._v = function (text) {\n    return createText(this, text)\n  }\n  Vue.prototype._render = function () {\n    const vm = this\n    const render = vm.$options.render\n    let vNode = render.call(vm)\n    return vNode\n  }\n}","/**\n * Vue的全局方法模块\n */\nimport { mergeOptions } from '../utils'\nexport function globalMixin (Vue) {\n  Vue.options = {}\n  Vue.mixin = function (options) {\n    // 每次调用mixin方法都会进行合并，然后记录下来，放到Vue.options属性上\n    this.options = mergeOptions(this.options, options)\n  }\n}","import { initMixin } from './init'\nimport { renderMixin } from './render'\nimport { lifecycleMixin } from './lifecycle'\nimport { stateMixin } from './state'\nimport { globalMixin } from './global-api/index.js'\nfunction Vue (options) {\n  this._init(options)\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\nstateMixin(Vue)\nglobalMixin(Vue)\nexport default Vue"],"names":["isFunction","val","isObject","isArray","Array","compileTemplate","tag","startTag","html","reg","RegExp","match","tagAttributes","text","tagClose","closeTag","qn","count","callbacks","watting","nextTick","cb","push","Promise","resolve","then","flushCallbacks","i","length","hooks","stracts","hook","mergeHook","parentValue","childValue","concat","mergeOptions","parent","child","obj","key","mergeField","oldArrayProto","prototype","arrayMethods","Object","create","methods","forEach","method","args","call","ob","__ob__","inserted","slice","observeArray","dep","notify","id","Dep","subs","target","addDeps","watcher","update","stack","pushTarget","popTarget","pop","Observe","data","defineProperty","value","enumerable","__proto__","walk","item","observe","keys","defineReactive","dependArray","current","depend","childOb","get","set","newVal","queue","pending","queueWatcher","flushSchedulerQueue","run","Watcher","vm","updateFnOrExpr","options","user","lazy","dirty","deps","depsId","Set","arr","split","undefined","has","add","addSubs","oldValue","stateMixin","Vue","$watch","handler","initState","$options","initData","watch","initWatch","computed","initComputed","proxy","source","_data","fn","createWatcher","_computedWatchers","getter","bind","defineComputed","createComputedGetter","computedFn","shareComputed","patch","oldVnode","vNode","parentNode","nodeType","elm","createEl","insertBefore","nextSibling","removeChild","children","document","createElement","appendChild","createTextNode","mountComponent","el","callHooks","updateComponent","_render","_update","console","log","lifecycleMixin","$el","$nextTick","handlers","root","createAstElement","attrs","type","start","attributes","element","chars","replace","end","Error","parserHtml","advance","len","substring","parseStartTag","parseEndTag","endTag","index","indexOf","startMatch","endMatch","gen","c","generate","regRes","tokens","lastIndex","JSON","stringify","trim","join","genChildren","res","map","genProps","props","str","styleObj","p","s1","s2","code","CompileToFunction","render","Function","initMixin","_init","constructor","$mount","querySelector","outerHTML","createVDom","createText","renderMixin","_c","_v","globalMixin","mixin"],"mappings":"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"}